<!DOCTYPE html>

<title>FARI - DEMO</title>

<html lang="en">

<head>
    <script type="text/json" src="staticFiles/data/leaderboard.json"></script>
    <link rel="stylesheet" href="staticFiles/style/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300&family=Montserrat&display=swap" rel="stylesheet">
    <style>
        body {
        font-family: "Sofia", sans-serif;
        }
    </style>
</head>

<body>

    <img class="logo" src="staticFiles/img/logo.png" alt="FARI Institute">

    <div class="score">
        <br>
        <h3 class="titlescore">Name | Score</h3>
        <ul id="leaderboard">

        </ul>
    </div>

    <div class="center">
        <br>
        <a class="but_play" href="{{url_for('play')}}">Play again</a>
        <br>
    </div>

</body>
</html>

<script>
    var players = {
        'Jean': 500, 
        'Paul': 200,
        'Pierre': 400,
        'Luc': 1000
    };

    fetch("staticFiles/data/leaderboard.json")
    .then(
        response => {
            return response.json();
        }
    )
    .then(
        data => {
            console.log(data);
        }
    )
    .catch(
        err => {
        }
    );

    function updateLeaderboard(){
        var text = document.getElementById("leaderboard");
        for (const [key, value] of Object.entries(players)) {
            text.innerHTML += "<li><b class='textscore2'>" + key + "</b><p class='textscore'>" + value + "</p></li>";
        }
    }

    function sortDict(dict) {
        const sortable = Object.fromEntries(
            Object.entries(dict).sort(([,a],[,b]) => b-a)
        );
        return sortable;
    }

    function addPlayer(name, score){
        players[name] = score;
    }

    addPlayer("Test", 2000);

    players = sortDict(players);    
    updateLeaderboard();

</script>